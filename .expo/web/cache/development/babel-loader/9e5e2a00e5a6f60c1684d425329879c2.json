{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nvar _class,\n    _temp,\n    _jsxFileName = \"C:\\\\Users\\\\shohrat.garadaghli\\\\Desktop\\\\dev\\\\orderApp\\\\src\\\\screens\\\\Categories\\\\CategoriesScreen.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport styles from \"./styles\";\nimport { categories } from \"../../data/dataArrays\";\nimport { getNumberOfRecipes } from \"../../data/MockDataAPI\";\nimport { connect } from 'react-redux';\nimport { setCategories } from \"../../store/shop/categories\";\nimport App from \"../../API/firebaseConfig\";\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    categories: state.categories\n  };\n};\n\nexport default connect(mapStateToProps, {\n  setCategories: setCategories\n})((_temp = _class = function (_React$Component) {\n  _inherits(CategoriesScreen, _React$Component);\n\n  var _super = _createSuper(CategoriesScreen);\n\n  function CategoriesScreen(props) {\n    var _this;\n\n    _classCallCheck(this, CategoriesScreen);\n\n    _this = _super.call(this, props);\n\n    _this.sendNewCategory = function _callee(category) {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              App.db.ref(\"categories/\").push(category).then(function () {\n                return _this.listener();\n              });\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.onPressCategory = function (item) {\n      var title = item.name;\n      var category = item;\n\n      _this.props.navigation.navigate('RecipesList', {\n        category: category,\n        title: title\n      });\n    };\n\n    _this.renderCategory = function (_ref) {\n      var item = _ref.item;\n      return React.createElement(TouchableHighlight, {\n        underlayColor: \"rgba(73,182,77,1,0.9)\",\n        onPress: function onPress() {\n          return _this.onPressCategory(item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 5\n        }\n      }, React.createElement(View, {\n        style: styles.categoriesItemContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 7\n        }\n      }, React.createElement(Image, {\n        style: styles.categoriesPhoto,\n        source: {\n          uri: item.photo_url\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 9\n        }\n      }), React.createElement(Text, {\n        style: styles.categoriesName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 9\n        }\n      }, item.name), React.createElement(Text, {\n        style: styles.categoriesInfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }\n      }, getNumberOfRecipes(item.id), \" product\")));\n    };\n\n    _this.convertObToArr = function (obj) {\n      var resultArr = [];\n      Object.keys(obj).map(function (key) {\n        resultArr = [].concat(_toConsumableArray(resultArr), [obj[key]]);\n      });\n      return resultArr;\n    };\n\n    return _this;\n  }\n\n  _createClass(CategoriesScreen, [{\n    key: \"listener\",\n    value: function listener() {\n      App.db.ref('categories/').on('child_added', function (snapshot) {\n        var data = snapshot.val();\n        console.log(data);\n        console.log(snapshot.key);\n        return snapshot.key;\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.setCategories();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log('props in categories: ', this.convertObToArr(this.props.categories));\n      return React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 7\n        }\n      }, React.createElement(Button, {\n        title: \"create a category\",\n        onPress: function onPress() {\n          return _this2.sendNewCategory({\n            name: 'testttt',\n            photo_url: 'https://www.telegraph.co.uk/content/dam/Travel/2019/January/france-food.jpg?imwidth=1400'\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }\n      }), React.createElement(FlatList, {\n        data: this.props.categories,\n        renderItem: this.renderCategory,\n        keyExtractor: function keyExtractor(item) {\n          return \"\" + item.id;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return CategoriesScreen;\n}(React.Component), _class.navigationOptions = {\n  title: 'Categories'\n}, _temp));","map":{"version":3,"sources":["C:/Users/shohrat.garadaghli/Desktop/dev/orderApp/src/screens/Categories/CategoriesScreen.js"],"names":["React","styles","categories","getNumberOfRecipes","connect","setCategories","App","mapStateToProps","state","props","sendNewCategory","category","db","ref","push","then","listener","onPressCategory","item","title","name","navigation","navigate","renderCategory","categoriesItemContainer","categoriesPhoto","uri","photo_url","categoriesName","categoriesInfo","id","convertObToArr","obj","resultArr","Object","keys","map","key","on","snapshot","data","val","console","log","Component","navigationOptions"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  FlatList,\n  Text,\n  View,\n  Image,\n  TouchableHighlight, Button\n} from 'react-native';\nimport styles from './styles';\nimport { categories } from '../../data/dataArrays';\nimport { getNumberOfRecipes } from '../../data/MockDataAPI';\nimport { connect } from 'react-redux';\nimport { setCategories } from '../../store/shop/categories';\nimport App from '../../API/firebaseConfig';\n\n\nconst mapStateToProps=(state)=>({\n  categories:state.categories\n})\n\nexport default connect(mapStateToProps,{setCategories}) (class CategoriesScreen extends React.Component {\n  static navigationOptions = {\n    title: 'Categories'\n  };\n\n  constructor(props) {\n    super(props);\n  }\n  sendNewCategory= async (category)=>{\n    App.db.ref(`categories/`).push(category).then(()=>this.listener());\n  }\n  onPressCategory = item => {\n    const title = item.name;\n    const category = item;\n    this.props.navigation.navigate('RecipesList', { category, title });\n  };\n  listener(){\n    App.db.ref('categories/').on('child_added', function(snapshot) {\n      var data = snapshot.val();\n      console.log(data);\n      console.log(snapshot.key);\n      return snapshot.key; // -KJ....\n    });\n  \n  }\n  renderCategory = ({ item }) => (\n    <TouchableHighlight underlayColor='rgba(73,182,77,1,0.9)' onPress={() => this.onPressCategory(item)}>\n      <View style={styles.categoriesItemContainer}>\n        <Image style={styles.categoriesPhoto} source={{ uri: item.photo_url }} />\n        <Text style={styles.categoriesName}>{item.name}</Text>\n        <Text style={styles.categoriesInfo}>{getNumberOfRecipes(item.id)} product</Text>\n      </View>\n    </TouchableHighlight>\n  );\n\n  componentDidMount(){\n    this.props.setCategories()\n  }\n  convertObToArr=(obj)=>{\n    let resultArr=[]\n    Object.keys(obj).map(key=>{\n      resultArr=[...resultArr,obj[key]]\n    })\n    return resultArr\n  }\n  render() {\n    console.log('props in categories: ',this.convertObToArr(this.props.categories))\n    return (\n      <View>\n        <Button title='create a category' onPress={()=>this.sendNewCategory(\n          {\n            name: 'testttt',\n            photo_url:\n            'https://www.telegraph.co.uk/content/dam/Travel/2019/January/france-food.jpg?imwidth=1400'\n        }\n        )}/>\n        <FlatList\n          data={this.props.categories}\n          renderItem={this.renderCategory}\n          keyExtractor={item => `${item.id}`}\n        />\n        \n      </View>\n    );\n  }\n})\n"]},"metadata":{},"sourceType":"module"}